<div class="container">
	<h1 class="text-center">Hackathon Map</h1>
	<div class="row">
		<div id="map-container" class="center-block">
			<div id="map-canvas"></div>
		</div>
	</div>

	<div class="row">
		<div class="btn btn-lg btn-add" data-toggle="modal" data-target="#myModal"><i class="fa fa-plus"></i> Add Your Project</div>

		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Tell Us About Your Project</h4>
		      </div>
		      <form action="<%= hack_maps_path %>" method="POST">
		      <div class="modal-body">
			        <div class="form-group">
			        	<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
					    <label for="title">Title of Project</label>
					    <input name="title" type="text" class="form-control" id="title" placeholder="title">
					  </div>
					  <div class="form-group">
					    <label for="description">Short Description</label>
					    <textarea name="description" id="description" class="form-control" rows="3"></textarea>
					  </div>
		      </div> <!-- end of modal body -->
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>


		        <input type="submit" class="btn btn-green" />
		      </div>
		  	</form>
		    </div>
		  </div>
		</div> <!-- end of modal -->
	</div> <!-- end of row -->
</div>
<script>
	function initialize() {
		var myLatLng = {lat: 42.2777610, lng: -83.7555190};
		var mapCanvas = document.getElementById('map-canvas');
		var mapOptions = {
			center: new google.maps.LatLng(42.2777610, -83.7555190),
			zoom: 17,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		}

		var map = new google.maps.Map(mapCanvas, mapOptions);
		
		/* function fired after modal form is submitted */
		function addMarker() {
			console.log("This method was called");
			var projectTitle = document.getElementById("title").innerHTML;
			var description = document.getElementById("description").innerHTML;

			var infowindow = new google.maps.InfoWindow({
		    	content: contentString
		  	});

		  	var contentString = '<div id="content">'+
	      '<div id="siteNotice">'+
	      '</div>'+
	      '<h1 id="firstHeading" class="firstHeading"' + projectTitle + '</h1>'+
	      '<div id="bodyContent">'+
	      '<p>' + description +'</p>'+
	      '</div>'+
	      '</div>';

		    var marker = new google.maps.Marker({
		        position: location, 
		        map: map,
		        animation: google.maps.Animation.DROP,
		        draggable: true,
		        title: 'Drag Me!'
		    });

		     marker.addListener('click', function() {
			    infowindow.open(map, marker);
			  });

		     marker.setMap(map); /* adds the marker to the map */
		  }

		

		/* google.maps.event.addListener(map, 'click', function(event) { */
		/* }); */


	}
	google.maps.event.addDomListener(window, 'load', initialize);

	
</script>